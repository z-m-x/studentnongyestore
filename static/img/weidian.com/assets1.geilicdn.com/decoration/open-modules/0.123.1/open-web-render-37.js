(window.openRenderLibJsonp=window.openRenderLibJsonp||[]).push([[37],{115:function(t,e,i){"use strict";i.r(e);var n=i(116),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e.default=a.a},116:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(79)),a=l(i(117)),o=l(i(85)),r=l(i(162)),s=i(111),d=i(165),u=i(107),c=i(152);function l(t){return t&&t.__esModule?t:{default:t}}var m=window.API,h=m.env,p=m.navUrl,g=h.get("isDecorate");e.default={name:"Item",mixins:[o.default,r.default],props:["model","env","template","pageStyle","isRenderCom"],data:function(){return{itemsTpt:[],isDecorate:g}},computed:{titleLimit:function(){return this.template&&this.template.attr&&this.template.attr.titleLimit}},created:function(){this.itemsTpt=(0,d.findItemsFromTemplate)(this.template)},mounted:function(){var t=this;"rt"===this.env&&this.$on("clickEvent",function(e){e.event;var i=e.eventName,n=e.key,a=(e.index,void 0);a="number"==typeof n?t.ArrayCache[n]:t.model,"goTo"===i?t.goTo(a):"buy"===i?t.onClickSku(a):"loadMore"===i&&t.loadMoreItems()})},methods:{getItemTptByIndex:function(t){var e=this.itemsTpt.length;return this.itemsTpt[t%e]},getUsedData:function(t){var e=this,i=(this.template,this.loading),o=this.itemLoading,r=this.ArrayCache,d=this.getItemTptByIndex,l=this.titleLimit,m=void 0!==t.show_price_tag&&!t.show_price_tag,p=t.cate_id,g="0"===p||0===p?"热卖商品":t.title;return{loading:i,hideMoreTxt:o,hideLoading:!o,hideHasMore:!t.hasMore,title:(0,u.processTitle)(g,l),hideTitle:!t.title,content:t.content.map(function(i,o){var u=void 0,l=!1,p=(0,a.default)(i,h.get("hideSold"),"rt"===e.env),g=r.length;r.push(p);var f=0;if(p.tag){var v=(0,s.getSizeFromUrl)(p.tag),T=d(o),_=(T?T.attr:{tagHeight:0}).tagHeight;_&&(f=v.width/v.height*parseInt(_))}return m?(l=m,m):("priceTag"in p?(u=p.priceTag,l=!p.priceTag):p.isPreSale?u="预售":(u=p.discount+"折",l=Number(p.discount)<.1||Number(p.discount)>=10),i.promotionCommission&&(l=!1,u="赚 "+i.promotionCommission),i.takePrice&&(l=!1,u="拿货价 "+i.takePrice)),(0,n.default)({_key:g,itemName:p.title,img:p.img,price:p.price,priceInt:p.priceInt,priceFloat:p.priceFloat,originalPrice:"￥"+p.originalPrice,sold:"销量"+p.sold,discount:u,hideItemName:void 0!==t.show_item_name&&!t.show_item_name,hideOriginalPrice:!p.originalPrice,hideDiscount:l,hidePoint:!0,hideSold:!p.sold,hideSoldOut:p.stock>0,hideCartBtn:void 0!==t.show_cart_btn&&!t.show_cart_btn||p.stock<1,hideTag:!t.show_item_name||!p.tag,tag:p.tag,tagWidth:f+"px",itemNameTextIndent:p.tag?f+10+"px":0,hideItemTag:!(t.showItemTag&&p.itemTag&&p.itemTag.length)},(0,c.adaptItemTagData)(p.itemTag))})}},goTo:function(t){if(this.isRenderCom)return this.$emit("goTo",t);var e=this.template,i=e.comId,n=e.tptId,a=t.id,o=t.url,r=(t.itemTag,o||a&&this.getItemLink(t)),s=API.urlQuery("pageId")||h.get("pageId"),d=h.get("pageType");r&&p(r,"店铺首页-商品",{comId:i,tptId:n,pageId:s,pageType:d})},onClickSku:function(t){t.isPreSale||t.is_pre_sale?window.API.Bus.emit("showToast",{content:"预售商品不支持加购，请先去商详付定金"}):t.id&&window.API.Bus.emit("onActiveSku",t.id,t.img,t.sku)}}}},118:function(t,e,i){var n=i(247);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0};i(78)(n,a);n.locals&&(t.exports=n.locals)},152:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a=i(79),o=(n=a)&&n.__esModule?n:{default:n};e.adaptItemTagData=function(t){if(!t)return{};var e={};return t.forEach(function(t){e["tagType-"+t.tagType+"-value"]=t.tagTitle,e["tagType-"+t.tagType+"-hide"]=!1}),(0,o.default)(e,{itemTag:t})}},246:function(t,e,i){"use strict";var n=i(118);i.n(n).a},247:function(t,e,i){(t.exports=i(77)()).push([t.i,"",""])},26:function(t,e,i){"use strict";i.r(e);var n=i(488),a=i(115);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i(246);var r=i(76),s=Object(r.a)(a.default,n.a,n.b,!1,null,null,null);s.options.__file="workspace/3fc6df7dd447ce6e55948aa25993839f/decoration_open-modules_prod_v3/src/item/web/index.vue",e.default=s.exports},488:function(t,e,i){"use strict";var n=function(){var t=this.$createElement,e=this._self._c||t;return(this.model.content&&this.model.content.length||this.isDecorate)&&this.template?e("div",{staticClass:"ct"},[this._t("default",null,{data:this.moduleData})],2):this._e()},a=[];n._withStripped=!0,i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})}}]);