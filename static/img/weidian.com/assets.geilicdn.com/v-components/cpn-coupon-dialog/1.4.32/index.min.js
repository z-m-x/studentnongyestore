!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t["cpn-coupon-dialog"]=n()}(this,function(){"use strict";var t=/QQ\/([\d.]+)/i,n=/micromessenger/i,e=/wxwork\/.* MicroMessenger/i,o=/WeiBo/i,i=/WDAPP\(WD\//i,c=navigator.userAgent.toLowerCase();function a(){return n.test(c)&&!e.test(c)}var q={"coupon-component-wrap":"index_coupon-component-wrap__1zW4c","coupon-qrcode-guide-wrap":"index_coupon-qrcode-guide-wrap__3DPGQ",bounceIn:"index_bounceIn__1yTJ3","coupon-component-content":"index_coupon-component-content__RbQ0i","coupon-qrcode-guide-content":"index_coupon-qrcode-guide-content__3w7HZ","coupon-component-dialog":"index_coupon-component-dialog__2c9zp","no-get-coupon":"index_no-get-coupon__3sGOe","fail-get-coupon":"index_fail-get-coupon__1r9e9","get-coupon-btn":"index_get-coupon-btn__1TBGm","no-get-content":"index_no-get-content__1cD11","no-get-slogon":"index_no-get-slogon__2PRIp","no-get-content-fail":"index_no-get-content-fail__24ZZO","no-get-fail":"index_no-get-fail__pysXz","coupon-fail-confirm-btn":"index_coupon-fail-confirm-btn__2snk_","no-login-coupon":"index_no-login-coupon__7Ol__","no-login-coupon-bg":"index_no-login-coupon-bg__yQrp4","no-login-coupon-close":"index_no-login-coupon-close__1LZHn","equity-coupon":"index_equity-coupon__3MnHh","equity-coupon-bg":"index_equity-coupon-bg__19VuR","equity-coupon-close":"index_equity-coupon-close__LMtlu","equity-coupon-close-top":"index_equity-coupon-close-top__TOvTz","equity-desc-content":"index_equity-desc-content__oVmdV","equity-desc-text":"index_equity-desc-text__3OKU9","equity-title-content":"index_equity-title-content__1cT1O","equity-money-content":"index_equity-money-content__2Ng-8","equity-money-content-random":"index_equity-money-content-random__3NbZM","equity-rmb-symbol":"index_equity-rmb-symbol__3cRv9","equity-rmb-symbol-random":"index_equity-rmb-symbol-random__1-1qg","equity-rmb-num":"index_equity-rmb-num__2RCXp","equity-rmb-max":"index_equity-rmb-max__3EqVv","equity-rmb-min":"index_equity-rmb-min__2m01C","equity-rmb-connect":"index_equity-rmb-connect__1Ut0l","equity-remind-text":"index_equity-remind-text__1Wtu1","equity-random-text":"index_equity-random-text__H-L5d","single-coupon":"index_single-coupon__1Wr6z","single-coupon-lg":"index_single-coupon-lg__2-oig","single-coupon-content":"index_single-coupon-content__32jVG","single-coupon-inner":"index_single-coupon-inner__2rST_","multi-coupon":"index_multi-coupon__3Y4dD","type-icon":"index_type-icon__1Cffd","type-icon-scale":"index_type-icon-scale__VomJF","type-icon-empty":"index_type-icon-empty__29UNi","type-icon-2":"index_type-icon-2__3XzGw","type-icon-eleven":"index_type-icon-eleven__1L9uK","coupon-currency":"index_coupon-currency__3tsSf","coupon-currency-top":"index_coupon-currency-top__1WQyj","coupon-currency-top-2":"index_coupon-currency-top-2__33H3X","coupon-currency-icon":"index_coupon-currency-icon__3qcy2","coupon-currency-num":"index_coupon-currency-num__JR3we","coupon-currency-num-min":"index_coupon-currency-num-min__1Qocx","coupon-wavy-line":"index_coupon-wavy-line__2y0Td","coupon-currency-num-max":"index_coupon-currency-num-max__2PnSI","condition-text":"index_condition-text__1w-In","slogon-text":"index_slogon-text__1piKc","remind-text":"index_remind-text__2im0c","use-btn":"index_use-btn__1Kk8b","remind-tips":"index_remind-tips__26MAJ","single-coupon-activity":"index_single-coupon-activity__1loe-","single-coupon-bottom-text":"index_single-coupon-bottom-text__y-aih","multi-img-bottom":"index_multi-img-bottom__2UjKa","multi-coupon-content":"index_multi-coupon-content__35bPC","multi-coupon-bg-4":"index_multi-coupon-bg-4__3p5tb","multi-coupon-bg-3":"index_multi-coupon-bg-3__1u11t","multi-coupon-bg-2":"index_multi-coupon-bg-2__3B3Su","multi-coupon-bg-1":"index_multi-coupon-bg-1__39ZOW","weidian-logo":"index_weidian-logo__3TqQM","weidian-eleven-logo":"index_weidian-eleven-logo__2DWb1","multi-top-info":"index_multi-top-info__2lzMR","coupon-item":"index_coupon-item__1lwFc","coupon-item-eleven":"index_coupon-item-eleven__1MoAv","item-right-text":"index_item-right-text__2hWbc","newuser-coupon-close":"index_newuser-coupon-close__3w7G9",middle:"index_middle__3BXK3","ul-price-span-content":"index_ul-price-span-content__ksCxm","coupon-qrcode-guide-dialog":"index_coupon-qrcode-guide-dialog__3J1vN","coupon-qrcode-title":"index_coupon-qrcode-title__3Ia0d","qrcode-coupon-close":"index_qrcode-coupon-close__30mJT","qrcode-coupon-line":"index_qrcode-coupon-line__CFMj-","e-active-count-down":"index_e-active-count-down__36-Zb","count-down-bfc":"index_count-down-bfc__tga7V","count-block-icon":"index_count-block-icon__1HYMU","count-block-dot":"index_count-block-dot__3MQYU","count-block-dot-bottom":"index_count-block-dot-bottom__3Ypcb","count-down-hour":"index_count-down-hour__17Z2n","count-down-micsecond":"index_count-down-micsecond__c2lo0","count-down-min":"index_count-down-min__1TzAw","count-down-second":"index_count-down-second__DApRh","count-down-text":"index_count-down-text__2f0W2","count-down-text-left":"index_count-down-text-left__10iPL","scalable-coupon":"index_scalable-coupon__1ErIy","scalable-coupon-head":"index_scalable-coupon-head__1G2IX","scalable-coupon-slogon":"index_scalable-coupon-slogon__2FNCv","level-currency":"index_level-currency__5O8P-","level-currency-icon":"index_level-currency-icon__Bu32p","level-currency-num":"index_level-currency-num__34CQ-","count-down-content":"index_count-down-content__3qbHP",wrapOutOpacity:"index_wrapOutOpacity__3RCop",zoomOutDown:"index_zoomOutDown__3HASA",animated:"index_animated__HBryz","coupon-float-content":"index_coupon-float-content__3T0Lt","cash-coupon-btn-tip":"index_cash-coupon-btn-tip__axysV","cash-coupon-btn-scalable":"index_cash-coupon-btn-scalable__2Q-ME","cash-coupon-btn-text":"index_cash-coupon-btn-text__2HnHt","cash-coupon-btn-time-tip":"index_cash-coupon-btn-time-tip__76yGp","no-login-item-right":"index_no-login-item-right__1HL5f","scalable-coupon-new":"index_scalable-coupon-new__ugVsY","currency-num":"index_currency-num__101AL","shop-download-bubble-content":"index_shop-download-bubble-content__3mC9Q","shop-download-bubble-inner":"index_shop-download-bubble-inner__27Z9T","bubble-corner-sign":"index_bubble-corner-sign__3Q8yT","bubble-amount-random":"index_bubble-amount-random__33xUi","bubble-amount-random-symbol":"index_bubble-amount-random-symbol__TIb7B","bubble-amount-random-value":"index_bubble-amount-random-value__2UwZn","bubble-amount-symbol":"index_bubble-amount-symbol__9TPXa","bubble-amount-content":"index_bubble-amount-content__3SxGB","bubble-amount-value":"index_bubble-amount-value__204ew","bubble-remind-text":"index_bubble-remind-text__3HSgo","bubble-remind-text-withdraw":"index_bubble-remind-text-withdraw__36cH7","bubble-time-text":"index_bubble-time-text__10u-p","bubble-condition-text":"index_bubble-condition-text__3i4mO","coupon-item-hide":"index_coupon-item-hide__11soJ","mine-coupon-list-content":"index_mine-coupon-list-content__118Md","mine-coupon-item-2":"index_mine-coupon-item-2__3yQHS","mine-coupon-item-3":"index_mine-coupon-item-3__3U2er","mine-coupon-list-close":"index_mine-coupon-list-close__-kb29","mine-coupon-element":"index_mine-coupon-element__eM_9m","mine-coupon-element-corner":"index_mine-coupon-element-corner__nCbau","list-amount-random":"index_list-amount-random__3Vz3Q","list-amount-random-max":"index_list-amount-random-max__KS9b4","list-amount-random-symbol":"index_list-amount-random-symbol__3HFe9","list-amount-random-value":"index_list-amount-random-value__1vbSK","list-amount-symbol":"index_list-amount-symbol__3dBLM","list-amount-value":"index_list-amount-value__1KPP3","list-dotted-line":"index_list-dotted-line__1ETDG","list-remind-text":"index_list-remind-text__1GG8N","list-remind-text-scalable":"index_list-remind-text-scalable__gxccC","list-time-text":"index_list-time-text__4J0ru","list-use-btn":"index_list-use-btn__lLnVb","normal-coupon":"index_normal-coupon__3xSW0","normal-coupon-bg":"index_normal-coupon-bg__3wW9B","normal-coupon-close":"index_normal-coupon-close__2GTSA","normal-desc-content":"index_normal-desc-content__3h0fj","normal-desc-text":"index_normal-desc-text__14fsb","normal-title-content":"index_normal-title-content__3F9Q0","normal-money-content":"index_normal-money-content__2D3lu","normal-money-content-random":"index_normal-money-content-random__pjFEO","normal-rmb-symbol":"index_normal-rmb-symbol__1UF8b","normal-rmb-symbol-random":"index_normal-rmb-symbol-random__1RwMD","normal-rmb-num":"index_normal-rmb-num__3Tbjj","normal-rmb-max":"index_normal-rmb-max__2cMko","normal-rmb-min":"index_normal-rmb-min__3FhnG","normal-rmb-connect":"index_normal-rmb-connect__1_y1l","normal-random-text":"index_normal-random-text__3vkPa","normal-remind-text":"index_normal-remind-text__Ylpin","normal-remind-fix":"index_normal-remind-fix__2jPUb","withdraw-coupon":"index_withdraw-coupon__kBgZC","withdraw-coupon-bg":"index_withdraw-coupon-bg__3ZWGX","withdraw-coupon-close":"index_withdraw-coupon-close__87li8","withdraw-title-content":"index_withdraw-title-content__20P3K","withdraw-money-content":"index_withdraw-money-content__24R5g","withdraw-rmb-symbol":"index_withdraw-rmb-symbol__36tzG","withdraw-rmb-num":"index_withdraw-rmb-num__lFMDH",couponComponentContainer:"index_couponComponentContainer__110T6",defaultModal:"index_defaultModal__3c3_Q",close:"index_close__3kBHf",cover:"index_cover__1dzBI"};function s(){if(-1!==location.search.toLowerCase().indexOf("debug")){for(var t,n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];(t=console).warn.apply(t,["[CouponDialog]"].concat(e))}}function d(){switch(!0){case t.test(c):return"qq";case o.test(c):return"weibo";case a():return"weixin";case i.test(c):return"wdseller";default:return"other"}}function r(t){return t instanceof Object?"{}"===JSON.stringify(t):t instanceof Array?"[]"===JSON.stringify(t):!t}function p(t){return q[t]?q[t]:t}var u="//thor.weidian.com",l="//assets.geilicdn.com/v-components/cpn-coupon-dialog/1.4.17",m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},v=function(){function o(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,n,e){return n&&o(t.prototype,n),e&&o(t,e),t}}(),h=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)},_=function(){function t(){g(this,t),this.apiUrl=u+"/poseidon/exhibit.spaceJson/1.0"}return v(t,[{key:"parseResponse",value:function(t){var n={};try{n=t.result.data}catch(t){}finally{return n}}},{key:"query",value:function(t,e){var n,o,i,c,a=this,s=this.apiUrl+"?param="+JSON.stringify(t);n=s,o=function(t){var n=a.parseResponse(t);e(n)},i="jsonp_"+Date.now()+"_"+Math.random().toString().substr(2),(c=document.createElement("script")).src=-1===n.indexOf("?")?n+"?callback="+i:n+"&callback="+i,window[i]=function(t){try{o instanceof Function&&o(t)}catch(t){}finally{delete window[i],c&&c.parentNode&&c.parentNode.removeChild(c)}},document.body.appendChild(c)}},{key:"customFormat",value:function(t,n){if(!n[t])return null;try{return this["_"+t](n[t])}catch(t){return null}}},{key:"dataFormat",value:function(t,n){return this[n](t)}},{key:"itemDetailNoLoginDialog",value:function(t){var n=[];try{return n=t.dataList.filter(function(t){return"item"===t.renderTitle}).map(function(t){return{jump_link:t.renderDataJson.jump_link||"javascript:void(0)",center_img:t.renderDataJson.center_img,right_corner_img:t.renderDataJson.right_corner_img,itemIdList:t.renderDataJson.itemIdList,expose_times:t.renderDataJson.expose_times||1,spoor:t.spoor}})}catch(t){return n}}},{key:"_wx_fetch_coupon_switch_space",value:function(t){var c={},n=[{key:"other",mapKey:"otherFetchCouponSwitch"},{key:"qq",mapKey:"qqFetchCouponSwitch"},{key:"weibo",mapKey:"wbFetchCouponSwitch"},{key:"wdseller",mapKey:"wdSellerFetchCouponSwitch"},{key:"weixin",mapKey:"wxFetchCouponSwitch"}];try{t.dataList.forEach(function(t){var i=t.renderDataJson;(i.effectivePage||"").toLowerCase().split(",").forEach(function(o){n.forEach(function(t){var n=o+"_"+t.key,e="false"!==i[t.mapKey];!1!==c[n]&&(c[n]=e)})})})}catch(t){}return c}},{key:"_h5_iwd_dialog",value:function(t){var n={};try{var e=t.dataList[0];if(!e.renderImage)return n;n={redirectUrl:e.redirectUrl||"javascript:void(0)",renderImage:e.renderImage,spoor:e.spoor}}catch(t){}return n}},{key:"_h5_payOK_dialog",value:function(t){var n={};try{var e=t.dataList[0];if(!e.renderImage)return n;n={redirectUrl:e.redirectUrl||"javascript:void(0)",renderImage:e.renderImage,spoor:e.spoor}}catch(t){}return n}}]),t}(),b=function(){function c(t){var i=this;g(this,c),this.name=t.name,this.data=t.data;var o=this.createContainer(),n="_"+this.name;o.innerHTML=this[n](this.data);var e=this.collectImages(o);this.preloadImages(e,function(){document.querySelector("body").appendChild(o),window.addEventListener("click",function(t){var n=i.getClosestCpndialogElementUntilBody(t.target);if(n&&(t.preventDefault(),t.stopPropagation(),""===n.dataset.cpndialogClose&&o.remove(),""===n.dataset.cpndialogOpen)){var e=n.getAttribute("href");-1!==e.indexOf("http")&&setTimeout(function(){location.href=e},500)}}),window.addEventListener("touchstart",function(t){var n=i.getClosestCpndialogElementUntilBody(t.target);if(n&&""===n.dataset.cpndialogOpen){var e=n.dataset.spiderActionName,o=JSON.parse(n.dataset.spiderActionArgs)||{};i.spiderTrackAction(e,o)}});var t=o.querySelector("[data-cpndialog]").dataset.spiderActionName,n=JSON.parse(o.querySelector("[data-cpndialog]").dataset.spiderActionArgs)||{};i.spiderTrackImpression(t,n)})}return v(c,[{key:"createContainer",value:function(){var t=document.createElement("div");return t.setAttribute("perf-ignore",""),t.className=q.couponComponentContainer,t.style.fontSize=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:25,n=document.querySelector('meta[name="viewport"]').getAttribute("content").match(/initial\-scale=([\d\.]+)/),e=parseFloat(n[1]),o=parseInt(1/e),i=document.documentElement.getBoundingClientRect().width;return 640<i/o&&(i=640*o),i/t+"px"}(),t}},{key:"collectImages",value:function(t){for(var n=[],e=t.querySelectorAll("img"),o=0;o<e.length;o++){var i=e[o].src;n.push(i)}return n}},{key:"preloadImages",value:function(t,e){var o=0,i=t.length;t.forEach(function(t){var n=new Image;n.onload=function(){++o===i&&e()},n.src=t})}},{key:"getClosestCpndialogElementUntilBody",value:function(t){return t?this.isCpndialogElement(t)?t:this.getClosestCpndialogElementUntilBody(t.parentElement):null}},{key:"isCpndialogElement",value:function(t){var n=t.dataset;return!!Object.keys(n).filter(function(t){return-1!==t.indexOf("cpndialog")}).length}},{key:"spiderTrackImpression",value:function(t,n,e){n=n||{};var o=window.spider;o&&o.trackImpression({actionName:t,actionArgs:n,spmc:e})}},{key:"spiderTrackAction",value:function(t,n,e){n=n||{};var o=window.spider;o&&o.trackAction({actionName:t,actionArgs:n,spmc:e})}},{key:"_default",value:function(t){var n=JSON.stringify({spoor:t.spoor,redirectUrl:t.redirectUrl,renderImage:t.renderImage});return'\n      <div class="'+q.defaultModal+'" data-cpndialog data-spider-action-name="cpndialog-default" data-spider-action-args=\''+n+"' >\n        <img class=\""+q.close+'" data-cpndialog-close data-spider-action-name="cpndialog-default-close"  data-spider-action-args=\''+n+'\' src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n        <a href="'+t.redirectUrl+'" data-cpndialog-open data-spider-action-name="cpndialog-default-open" data-spider-action-args=\''+n+'\' data-spider-mode="none">\n          <img class="'+q.cover+'" src="'+t.renderImage+'" />\n        </a>\n      </div>\n    '}}]),c}(),y=new _;function f(t){if(s("初始化入参",t),t){var n,e;n=l+"/index.css",(e=document.createElement("link")).href=n,e.type="text/css",e.rel="stylesheet",document.head.appendChild(e);var o=this;o.shopId=t.shopId,o.itemId=t.itemId,o.orderNo=t.orderNo,o.page=t.page,o.channel=t.channel,o.source=t.source,o.extend=t.extend,o.hasItem=t.hasItem||!1,o.remainTime=t.remainTime||!1,o.isScalable=!1,o.isWithDraw=!1,o.headImage="",o.exhibitResult=t.exhibitResult,o.qrcodeStatus=!1,o.floatContainer=t.container,o.mineCouponStatus=!1,o.couponExhibition=!1,o.reuse=!1,o.nologinCenterImg="",o.couponType="default",o.suspendImg=t.suspendImg,o.couponActivityType="",o.intervalId,o.showMockData=t.showMockData,o.fetchMockData=t.fetchMockData,o.panel=document.createElement("div"),o.content=document.createElement("div"),o.dialog=document.createElement("div"),o.panel.className=q["coupon-component-wrap"],o.panel.id="common-coupon-component-wrap",o.content.className=q["coupon-component-content"],o.dialog.className=q["coupon-component-dialog"],o.content.appendChild(o.dialog),o.panel.appendChild(o.content),o.showCouponHook=t.showCouponHook||function(){},o.fetchCouponHook=t.fetchCouponHook||function(){},o.showFailedHook=t.showFailedHook||function(){},o.fetchFailedHook=t.fetchFailedHook||function(){},o.closeDialogHook=t.closeDialogHook||function(){},o.buyerDownloadAppHook=t.buyerDownloadAppHook||function(){},o.buyTogetherHook=t.buyTogetherHook||!1,o.floatClickHook=t.floatClickHook||function(){},o.floatRenderHook=t.floatRenderHook||function(){},o.toolbarItemClickHook=t.toolbarItemClickHook||function(){},o.withdrawCouponHook=t.withdrawCouponHook||function(){},o.onPayOKPoseidonEmptyHook=t.onPayOKPoseidonEmptyHook||function(){},o.hasFetchCouponFinishedHook=t.hasFetchCouponFinishedHook||function(){}}}return f.prototype={init:function(){var i=this;i.fetchCouponSwitch(function(t){if(!t)return s("开关关闭状态下，结束流程"),void i.closeDialogHook();if("iwd"===i.page)return s("进入个人中心页流程"),void y.query({exhibitCode:"h5_iwd",spaceCodeList:["h5_iwd_dialog"]},function(t){var n=y.customFormat("h5_iwd_dialog",t);if(r(n))i.closeDialogHook();else{var e="v-components/cpn-coupon-dialog@iwdDefault",o=i.getCookie(e)||0;1<=o||(i.setCookie(e,Number(o)+1,864e5),new b({name:"default",data:n}))}});if("payOK"===i.page)return s("进入支付完成页流程"),void y.query({exhibitCode:"h5_payOK",spaceCodeList:["h5_payOK_dialog"]},function(t){s("支付完成页投放返回数据",t);var n=y.customFormat("h5_payOK_dialog",t);if(r(n))i.onPayOKPoseidonEmptyHook();else{var e="v-components/cpn-coupon-dialog@payOKDefault",o=i.getCookie(e)||0;1<=o?i.onPayOKPoseidonEmptyHook():(i.setCookie(e,Number(o)+1,864e5),new b({name:"default",data:n}))}});if(i.isLogin())"shopDetail"==i.source&&i.mineCouponRequest(function(t){t&&t.length&&(i.mineCouponStatus=!0,i.suspendImg&&"weixin"!==d()&&(i.toggleToolbarContent(),i.scrollBottomBanner(t[0])))}),i.getPutInStatus(function(){i.showCouponRequest(),i.getWeixinHeadImage()},!0);else{if("itemDetail"===i.source)return;i.getPutInStatus(function(){i.showNologinDialog()},!1)}})},showNologinDialog:function(){var t=this;t.reuse=!0;var n,e=void 0,o=void 0;if("shopDetail"==t.source&&t.key2JsonShop)e=t.key2JsonShop.expose_times||1,o="v-components/cpn-coupon-dialog@nologinshop";else{if("itemDetail"!=t.source||!t.key2JsonItem)return;e=t.key2JsonItem.expose_times||1,o="v-components/cpn-coupon-dialog@nologinitem"}(n=t.getCookie(o))>=Number(e)||(n?t.setCookie(o,Number(n)+1,864e5):t.setCookie(o,1,864e5),t.showCouponDialog({type:1}))},mineCouponRequest:function(n){var e=[],t="v-components/cpn-coupon-dialog@withdraw_"+this.getCookie("uid"),o=this.getCookie(t);o&&(e=[{currency:o,remind_text:"可提现",type:"withdraw"}]);this.jsonp("//thor.weidian.com/decorate/coupon.getShopDetailCouponInfo/1.0?param="+encodeURIComponent(JSON.stringify({size:20})),function(t){t&&0===t.status.code&&t.result&&t.result.length?(t.result.forEach(function(t){t.condition_text="",t.slogon="你已有一个红包，赶紧去使用吧",t.currency=t.currency||t.curry}),e=[].concat(h(e),h(t.result)),n(e.splice(0,3))):e.length&&n(e)})},showCouponRequest:function(){var s=this;s.jsonp("//thor.weidian.com/doraemon/batchShowCoupon/1.0?param="+encodeURIComponent(JSON.stringify({page:s.page,channel:s.channel,shopId:s.shopId,itemId:s.itemId,orderNo:s.orderNo,extend:s.extend})),function(t){if(s.showMockData&&(t=s.showMockData),s.hasFetchCouponFinishedHook(t),s.spiderTrackAction("centerShowComplete"),t&&0===t.status.code&&t.result&&t.result.withdraw_coupon)if(s.isWithDraw=!0,"iweidian"==s.source||"paySuccess"==s.source)s.withdrawCouponHook(t.result);else{var n="v-components/cpn-coupon-dialog@withdraw_"+s.getCookie("uid");s.getCookie(n)||s.withDrawCouponAction(function(t){s.showCouponDialog({mode:"first",value:t})})}else if(t&&0===t.status.code&&t.result&&t.result.couponRightsRespList&&t.result.couponRightsRespList.length){var e=t.result,o=e.cashCouponDetailList,i=e.couponRightsRespList;o&&o.length?s.fetchCouponAction("center-fetch"):s.showCouponDialog({type:"",renderType:2,couponRightsRespList:i})}else if(t&&0===t.status.code&&t.result&&t.result.cashCouponDetailList&&t.result.cashCouponDetailList.length){var c=t.result,a=c.action;"center-fetch"==a?(s.spiderTrackAction("centerShowSuccess"),s.fetchCouponAction("center-fetch")):s.buyTogetherHook&&c.buy_together?s.buyTogetherHook(t):"center-show"==a&&s.showCouponDialog({coupon_title:c.coupon_title||"",coupon_sub_title:c.coupon_sub_title||""})}else s.showFailedHook(t)})},fetchCouponAction:function(s){var r=this;r.fetchCouponHook(s),r.spiderTrackAction("centerFetchStart"),r.jsonp("//thor.weidian.com/doraemon/batchFetchCoupon/1.0?param="+encodeURIComponent(JSON.stringify({page:r.page,channel:r.channel,shopId:r.shopId,itemId:r.itemId,orderNo:r.orderNo,extend:r.extend})),function(t){if(r.fetchMockData&&(t=r.fetchMockData),r.show_popup=!0,"itemDetail"===r.source&&"weixin"===d()&&t&&0===t.status.code&&!1===t.result.show_popup&&(r.show_popup=!1),t&&0===t.status.code&&t.result&&t.result.couponRightsRespList&&t.result.couponRightsRespList.length){var n=t.result,e=n.cashCouponFetchList,o=n.couponRightsRespList;e&&e.length?r.showCouponDialog({type:2,renderType:1,couponRightsRespList:o,cashCouponFetchList:e}):r.showCouponDialog({type:2,renderType:2,couponRightsRespList:o})}else if(t&&0===t.status.code&&t.result&&t.result.cashCouponFetchList&&t.result.cashCouponFetchList.length){r.spiderTrackAction("centerFetchSuccess");var i=t.result.cashCouponFetchList[0].slogon||"";r.isScalable=t.result.cashCouponFetchList[0].is_scalable;var c=t.result||{},a={resultArr:c.cashCouponFetchList,is_multi_coupon:c.is_multi_coupon||!1,fetch_top_info:c.fetch_top_info||"",rec_items:c.rec_items,slogon:i};r.showCouponDialog(a)}else"center-fetch"!=s&&(r.showCouponDialog({msg:t.status.message}),r.fetchFailedHook())})},withDrawCouponAction:function(n){this.jsonp("//thor.weidian.com/medusa/cashStage.checkin/1.0",function(t){t&&0===t.status.code&&t.result&&t.result.withdrawAmount&&n((t.result.withdrawAmount/100).toFixed(2))})},showCouponDialog:function(t){var n=this,e=!1,o=n.pxToRem(n.closeBtnRight),i=n.pxToRem(n.closeBtnTop);n.reuse||(window.blockAutoToolbar=!0,n.showCouponHook()),!1!==n.show_popup?(1==t.type?(n.nologinRender(t),e=!0):"coupon_title"in t&&"coupon_sub_title"in t?n.centerShowHTML(t):"msg"in t?n.centerShowFailHTML(t.msg):t.is_multi_coupon?(n.centerFetchMultiHTML(t),n.isMulti=!0):t.isMineCoupon?(n.showMineCoupon(t),e=!0):(n.isWithDraw&&t.value?(n.withDrawCouponRender(t),e=!0):n.isScalable?n.scalableHTML(t.resultArr[0]):2==t.type?(n.equityCouponRender(t),e=!0):"activity"==n.couponActivityType&&"old"==n.grayVersion?n.ActivitySingleHTML(t.resultArr[0],t.slogon):"new"==n.grayVersion?(n.normalCouponHTML(t.resultArr[0],t.slogon),e=!0):n.centerFetchSingleHTML(t.resultArr[0],t.slogon),n.isMulti=!1),e||(n.dialog.innerHTML+='<div class="e-active-newuser-coupon-close '+q["newuser-coupon-close"]+'" style="top: '+i+"; right: "+o+'"></div>'),document.body.appendChild(n.panel),n.bindEvent(),n.reuse||n.spiderTrackAction("newuser_coupon_exposure",{msg:n.isMulti?"多张":n.isScalable?"翻倍":"new"==n.grayVersion?"单张新版":"单张"})):n.closeElListener()},nologinRender:function(){var t=this,n="";if("shopDetail"==t.source&&t.key2JsonShop?n=t.key2JsonShop.center_img:"itemDetail"==t.source&&t.key2JsonItem&&(n=t.key2JsonItem.center_img),n){t.dialog.innerHTML='<div class="'+q["no-login-coupon"]+" "+p("e-active-openBuyerApp")+'" buyer-coupon-type="nologin" perf-ignore>\n\t\t\t\t<img class="'+q["no-login-coupon-bg"]+'" src="'+n+'" />\n\t\t\t\t<img class="'+p("e-active-newuser-coupon-close")+" "+q["no-login-coupon-close"]+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n\t\t\t</div>',t.spiderTrackImpression("nologin-dialog",{msg:n}),t.nologinCenterImg=n;var e=setInterval(function(){document.querySelector("."+q["no-login-coupon-bg"])&&0<document.querySelector("."+q["no-login-coupon-bg"]).offsetHeight&&(document.querySelector("."+q["no-login-coupon-close"]).style.display="block",clearInterval(e))},100)}},equityCouponRender:function(t){var n=this,e=t.renderType,o=t.couponRightsRespList,i=t.cashCouponFetchList,c=i&&i.length?i[0]:{},a=c.remind_text,s=c.condition_text,r=c.type,u=c.max_amount,d=c.min_amount,l=c.currency,p=o[0],m=p.rightsConfigJson,g=p.rightsCode,v=m.allRightsRedirectUrl,h=m.allRightsBgUrl,_=m.allRightsNativeBg,b=m.partRightsRedirectUrl,y=m.partRightsIconUrl,f=m.partRightsText,w=m.partRightsNativeBg,A=void 0,x=void 0,C=void 0,k=void 0,S=void 0;1==e?(A=w,x=b,k=y,S=f):2==e&&(A=_,x=v,C=h),n.spiderTrackImpression("_download",{renderType:e,rightsType:g},"equity"),n.equityInfoInApp={type:3,renderType:e,rightsType:g,img:A,link:x},n.dialog.innerHTML=n.equityCouponHTML({renderType:e,bgImg:C,iconImg:k,slogonText:S,remindText:a,conditonText:s,currency:l,minAmount:d,maxAmount:u,randomType:Number(r)}),n.couponType="equity";var T=setInterval(function(){document.querySelector("."+q["equity-coupon-bg"])&&0<document.querySelector("."+q["equity-coupon-bg"]).offsetHeight&&(document.querySelector("."+q["equity-coupon-close"]).style.display="block",clearInterval(T))},100)},equityCouponHTML:function(t){return 2==t.renderType?'<div class="'+q["equity-coupon"]+' e-active-openBuyerApp" buyer-coupon-type="equity" perf-ignore>\n\t\t\t\t\t<img class="'+q["equity-coupon-bg"]+'" src="'+t.bgImg+'" />\n\t\t\t\t\t<img class="e-active-newuser-coupon-close '+q["equity-coupon-close"]+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n\t\t\t\t</div>':'<div class="'+p("equity-coupon")+' e-active-openBuyerApp" buyer-coupon-type="equity" perf-ignore>\n\t\t\t\t\t<img class="'+q["equity-coupon-bg"]+'" src="https://si.geilicdn.com/img-3c7d0000016b0bac3f0b0a20b7b9-unadjust_1080_1120.png" />\n\t\t\t\t\t<div class="'+q["equity-title-content"]+'">运气真好，获得新人红包～</div>\n\t\t\t\t\t<div class="'+q["equity-desc-content"]+'">\n\t\t\t\t\t\t'+(t.iconImg?'<img src="'+t.iconImg+'" />':"")+'\n\t\t\t\t\t\t<div class="'+q["equity-desc-text"]+'">'+t.slogonText+"</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t"+(1==t.randomType?'<div class="'+q["equity-money-content"]+" "+q["equity-money-content-random"]+'">\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-symbol"]+" "+q["equity-rmb-symbol-random"]+'"><span>￥</span></div>\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-min"]+'">'+t.minAmount+'</div>\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-connect"]+'">～</div>\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-max"]+'">'+t.maxAmount+'</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+q["equity-random-text"]+'">\n\t\t\t\t\t\t\t<span>'+t.conditonText+"</span>\n\t\t\t\t\t\t</div>":'<div class="'+q["equity-money-content"]+'">\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-symbol"]+'"><span>￥</span></div>\n\t\t\t\t\t\t\t<div class="'+q["equity-rmb-num"]+'">'+t.currency+"</div>\n\t\t\t\t\t\t</div>")+'\n\t\t\t\t\t<div class="'+q["equity-remind-text"]+'">\n\t\t\t\t\t\t<span>'+t.remindText+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<img class="e-active-newuser-coupon-close '+q["equity-coupon-close"]+" "+q["equity-coupon-close-top"]+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n\t\t\t\t</div>'},centerShowHTML:function(t){this.dialog.innerHTML='<div class="'+q["no-get-coupon"]+'" perf-ignore>\n\t\t\t\t<div class="'+q["no-get-content"]+'">\n\t\t\t\t<div class="'+q["no-get-logo"]+'"></div>\n\t\t\t\t<div class="'+q["no-get-slogon"]+'">\n\t\t\t\t\t<p>'+t.coupon_title+"</p>\n\t\t\t\t\t<p>"+t.coupon_sub_title+'</p>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="e-active-fetchcoupon '+q["get-coupon-btn"]+'" data-spider-action-name="get_coupon"><span>领</span></div>\n\t\t\t</div>'},centerShowFailHTML:function(t){this.dialog.innerHTML='<div class="'+q["no-get-coupon"]+' fail-get-coupon" perf-ignore>\n\t\t\t\t<div class="'+q["no-get-content"]+" "+q["no-get-content-fail"]+'">\n\t\t\t\t<div class="no-get-logo"></div>\n\t\t\t\t<div class="'+q["no-get-slogon"]+" "+q["no-get-fail"]+'">\n\t\t\t\t\t<p>'+t+'</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="'+q["coupon-fail-confirm-btn"]+'">确定</div>\n\t\t\t\t</div>\n\t\t\t</div>'},cornerMark:function(t){return t.is_cpn_only_coupon?'<div class="'+p("type-icon")+'" perf-ignore><div class="'+p("type-icon-scale")+'"><span>App探店专享</span></div></div>':t.is_app_only_coupon?'<div class="'+p("type-icon")+" "+p("type-icon-2")+'" perf-ignore><div class="'+p("type-icon-scale")+'"><span>App全场通用</span></div></div>':'<div class="'+p("type-icon-empty")+'" perf-ignore></div>'},amountType:function(t){return 1==t.type?'<div class="'+p("coupon-currency-num-min")+'"><span>'+t.min_amount+'</span>\n\t\t\t\t<span class="'+p("coupon-wavy-line")+'">~</span></div>\n\t\t\t\t<div class="'+p("coupon-currency-icon")+'"><span>￥</span></div>\n\t\t\t\t<div class="'+p("coupon-currency-num-max")+'"><span>'+t.max_amount+"</span></div>":'<div class="'+p("coupon-currency-num")+'"><span>'+t.currency+"</span></div>"},remindTextRender:function(t,n){var e="",o="";return o=n?"后过期":(e="还剩","失效"),n?'<div class="'+p("remind-text")+'"><span>'+n+"</span></div>":this.timeInterval(t)?'<div class="'+p("e-active-count-down")+'">\n\t\t\t\t\t<div class="'+p("count-down-bfc")+'">\n\t\t\t\t\t\t<div class="'+p("count-down-text")+" "+p("count-down-text-left")+'">'+e+'</div>\n\t\t\t\t\t\t<div class="'+p("count-down-hour")+'"><span>00</span></div>\n\t\t\t\t\t\t<div class="'+p("count-block-icon")+'">\n\t\t\t\t\t\t\t<div class="'+p("count-block-dot")+'"></div>\n\t\t\t\t\t\t\t<div class="'+p("count-block-dot")+" "+p("count-block-dot-bottom")+'"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+p("count-down-min")+'"><span>00</span></div>\n\t\t\t\t\t\t<div class="'+p("count-block-icon")+'">\n\t\t\t\t\t\t\t<div class="'+p("count-block-dot")+'"></div>\n\t\t\t\t\t\t\t<div class="'+p("count-block-dot")+" "+p("count-block-dot-bottom")+'"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+p("count-down-second")+'"><span>00</span></div>\n\t\t\t\t\t\t<div class="'+p("count-down-micsecond")+'"><span>0</span></div>\n\t\t\t\t\t\t<div class="'+p("count-down-text")+'">'+o+"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>":""},floatTextRender:function(){return'<div class="'+p("e-active-count-down")+'">\n\t\t\t\t\t\t<span class="'+p("count-down-hour")+'"><span>00</span>:</span><span class="'+p("count-down-min")+'"><span>00</span>:</span><span class="'+p("count-down-second")+'"><span>00</span></span>\n\t\t\t\t\t</div>'},centerFetchMultiHTML:function(t){for(var n,e=[],o=0;o<t.resultArr.length;o++){var i=t.resultArr[o].remind_text;n='<div class="'+p("coupon-item")+'" buyer-coupon-code='+t.resultArr[o].buyer_coupon_code+">\n\t\t\t\t\t\t\t\t"+this.cornerMark(t.resultArr[o])+'\n\t\t\t\t\t\t\t\t<div class="'+p("coupon-currency")+'">\n\t\t\t\t\t\t\t\t\t<div class="'+p("coupon-currency-icon")+'"><span>￥</span></div>\n\t\t\t\t\t\t\t\t\t\t'+this.amountType(t.resultArr[o])+'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="'+p("item-right-text")+'">\n\t\t\t\t\t\t\t\t\t<span>'+t.resultArr[o].condition_text+"</span>\n\t\t\t\t\t\t\t\t\t<span>"+i+"</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>",e.push(n)}this.dialog.innerHTML='<div class="'+p("multi-coupon")+" "+p("e-active-openBuyerApp")+'">\n\t\t\t\t<div class="'+p("multi-coupon-content")+" "+p("multi-coupon-bg-"+t.resultArr.length)+'">\n\t\t\t\t\t<div class="'+p("weidian-logo")+'"></div>\n\t\t\t\t\t<div class="'+p("multi-top-info")+'"><span>'+t.fetch_top_info+"</span></div>\n\t\t\t\t\t"+e.join("")+'\n\t\t\t\t</div>\n\t\t\t\t<div perf-ignore class="'+p("coupon-load-img")+" "+p("multi-img-bottom")+'">\n\t\t\t\t\t<div class="use-btn">\n\t\t\t\t\t\t<span>立即使用</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("remind-tips")+'">\n\t\t\t\t\t\t<a data-spider-action-name="mycard" href="https://h5.weidian.com/m/mkt-card-package/myCard.html">去“我的卡券包”查看红包>></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>'},centerFetchSingleHTML:function(t,n){var e=t.is_cpn_only_coupon?"限标有“探店红包”店铺使用":"",o="",i=n||"";t.condition_text||e?t.condition_text&&e||(o=p("coupon-currency-top")):o=p("coupon-currency-top-2");var c=t.remind_text;this.dialog.innerHTML='<div class="'+p("single-coupon")+" "+p("e-active-openBuyerApp")+'" buyer-coupon-code='+t.buyer_coupon_code+' perf-ignore>\n\t\t\t\t<div class="'+p("single-coupon-content")+'">\n\t\t\t\t<div class="'+p("single-coupon-inner")+'">\n\t\t\t\t\t'+this.cornerMark(t)+'\n\t\t\t\t\t<div class="'+p("coupon-currency")+" "+o+'">\n\t\t\t\t\t\t<div class="'+p("coupon-currency-icon")+'"><span>￥</span></div>\n\t\t\t\t\t\t'+this.amountType(t)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("condition-text")+'"><span>'+t.condition_text+'</span></div>\n\t\t\t\t\t<div class="'+p("condition-text")+'"><span>'+e+'</span></div>\n\t\t\t\t\t<div class="'+p("single-coupon-bottom-text")+'">\n\t\t\t\t\t\t<div class="'+p("slogon-text")+'">'+i+"</div>\n\t\t\t\t\t\t"+this.remindTextRender(t.end_time,c)+'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="'+p("remind-tips")+'">\n\t\t\t\t\t<a data-spider-action-name="mycard" href="https://h5.weidian.com/m/mkt-card-package/myCard.html">去“我的卡券包”查看红包>></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>'},ActivitySingleHTML:function(t,n){var e=this,o=t.is_cpn_only_coupon?"限标有“探店红包”店铺使用":"",i="",c=n||"",a=e.pxToRem(e.blockPadding),s=e.otherColorNumber,r=e.notesColorNumber;t.condition_text||o||(i=p("coupon-currency-top"));var u="e-active-openBuyerApp";"itemDetail"===e.page&&"weixin"===d()?u="e-active-newuser-coupon-close e-active-coupon-animation":"shopDetail"===e.page&&"weixin"===d()&&(u="e-active-newuser-coupon-close e-active-coupon-animation"),this.dialog.innerHTML='<div class="'+p("single-coupon")+" "+p("single-coupon-activity")+" "+u+'" style="background-image: url('+e.oneCouponBgUrl+"); padding-left: "+a+"; padding-right: "+a+';" buyer-coupon-code='+t.buyer_coupon_code+' perf-ignore>\n\t\t\t\t<div class="'+p("single-coupon-content")+'">\n\t\t\t\t<div class="'+p("single-coupon-inner")+'">\n\t\t\t\t\t'+e.cornerMark(t)+'\n\t\t\t\t\t<div class="'+p("coupon-currency")+" "+i+'" style="color: '+r+'">\n\t\t\t\t\t\t<div class="'+p("coupon-currency-icon")+'"><span>￥</span></div>\n\t\t\t\t\t\t'+e.amountType(t)+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("condition-text")+'"><span>'+t.condition_text+'</span></div>\n\t\t\t\t\t<div class="'+p("condition-text")+'"><span>'+o+'</span></div>\n\t\t\t\t\t<div class="'+p("single-coupon-bottom-text")+'">\n\t\t\t\t\t\t<div class="'+p("slogon-text")+'" style="color: '+s+'">'+c+'</div>\n\t\t\t\t\t\t<div class="'+p("remind-text")+'"><span>'+t.remind_text+"</span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>"},normalCouponHTML:function(t,n){var e=this,o=n||"",i=e.otherColorNumber,c=e.notesColorNumber,a=e.styleArrayToString({color:i},[],["color"]),s=e.styleArrayToString({color:c},[],["color"]),r="e-active-openBuyerApp";"itemDetail"===e.page&&"weixin"===d()&&(e.floatContainer="",r="e-active-newuser-coupon-close e-active-coupon-animation"),this.dialog.innerHTML='<div class="'+p("normal-coupon")+" "+r+'" buyer-coupon-type="normal" perf-ignore>\n\t\t\t\t<img class="'+p("normal-coupon-bg")+'" src="'+(e.oneCouponBgUrl||"https://si.geilicdn.com/img-37670000016b1b52f3f60a217205-unadjust_1080_1120.png")+'" />\n\t\t\t\t<div class="'+p("normal-title-content")+'" style="'+a+'">'+o+"</div>\n\t\t\t\t"+(1==t.type?'<div class="'+p("normal-money-content")+" "+p("normal-money-content-random")+'" style="'+s+'">\n\t\t\t\t\t\t<div class="'+p("normal-rmb-symbol")+" "+p("normal-rmb-symbol-random")+'"><span>￥</span></div>\n\t\t\t\t\t\t<div class="'+p("normal-rmb-min")+'">'+t.min_amount+'</div>\n\t\t\t\t\t\t<div class="'+p("normal-rmb-connect")+'">～</div>\n\t\t\t\t\t\t<div class="'+p("normal-rmb-max")+'">'+t.max_amount+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("normal-random-text")+'" style="'+a+'">\n\t\t\t\t\t\t<span>'+(t.condition_text||"")+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("normal-remind-text")+'" style="'+a+'">\n\t\t\t\t\t\t<span>'+(t.remind_text||"")+"</span>\n\t\t\t\t\t</div>":'<div class="'+p("normal-money-content")+'" style="'+s+'">\n\t\t\t\t\t\t<div class="'+p("normal-rmb-symbol")+'"><span>￥</span></div>\n\t\t\t\t\t\t<div class="'+p("normal-rmb-num")+'">'+t.currency+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("normal-remind-text")+" "+p("normal-remind-fix")+'" style="'+a+'">\n\t\t\t\t\t\t<span>'+(t.remind_text||"")+"</span>\n\t\t\t\t\t</div>")+'\n\t\t\t\t<img class="'+p("e-active-newuser-coupon-close")+" "+p("normal-coupon-close")+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n\t\t\t</div>'},withDrawCouponRender:function(t){var n=t.value,e=t.mode,o="v-components/cpn-coupon-dialog@withdraw_"+this.getCookie("uid"),i="first"==e?"恭喜你！获得提现红包":"你已获得一个提现红包";this.setCookie(o,n,864e5),this.dialog.innerHTML='<div class="'+p("withdraw-coupon")+' e-active-openBuyerApp" buyer-coupon-type="withdraw" coupon-recsum="'+n+'" perf-ignore>\n\t\t\t\t<img class="'+p("withdraw-coupon-bg")+'" src="https://si.geilicdn.com/img-5c660000016b2218cb400a211580-unadjust_1080_1060.png" />\n\t\t\t\t<div class="'+p("withdraw-title-content")+'">'+i+'</div>\n\t\t\t\t\t<div class="'+p("withdraw-money-content")+'">\n\t\t\t\t\t\t<div class="'+p("withdraw-rmb-symbol")+'"><span>￥</span></div>\n\t\t\t\t\t\t<div class="'+p("withdraw-rmb-num")+'">'+n+'</div>\n\t\t\t\t\t</div>\n\t\t\t\t<img class="e-active-newuser-coupon-close '+p("withdraw-coupon-close")+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAAH7+Yj7AAAABGdBTUEAALGPC/xhBQAABPhJREFUWAnFmd9rVEcUxzeb1W2kooZYbQulpqSl+Kt2hRL6ll8U8tiH4IN/gFD6IghCQaQFX/U/ECQvyasEQ5I+hgqJS8WU1hAtfdgirVXYrGySZvV8Zu/ZnZ0792aS1Xjg3Jk5c+Y7584598zMbmemScekmheudESyQrOvXkOj8DIi6ll5vKj3NZ+Jw1XljFbQdCd5BKZLvT5hplPUgNhvqS/q7MhcbNX7WyolVUxSUuUMczdMVqkswoLWtQxGVEUGHhLuVQSrXKTOG9qEez4XZtBTu0MRKb+0O6y6QdSFTFJC36wIU2+5NKKTzTFEaWZm5hvqh4RWVlYej42N/RL1HcW2FsRSqfRjpVJ52tfXdz1SMkWL4sLCwjmQuru7D2az2czg4OAdVUYRz+hLqdwt76NQdKWe9gaISi22RsL/pfyVuq0Y9ZniA3m+bws89ZrI7gtv2n02IPU0B9nj3PozETxCqIAhFrkgvvYii0gAel+P72Fubs44X0fjOt93EvWb7NGnym7Z0dFxtlarZQAgUCiJA+SurraxcEMbvpKwRC5R9y9lT0/PQcokAvCPpE7bIgnhG7bFCWOq6hS+ri8SlELFJhYVUAf1SsW8ogoCS74O4rIRNr5xaaFUlQEPhWPr71roAh8RAU7YFw2uSFkSXhP2kg+Q9TwljMPSyGR+V8EFTHtNd6y270nlpTZswE9EmBpjOshTNkD1tfDsTsHAbyQV1gs6Xi/aevK2ZSz8sC2Y5mCTYAA82pQ1a9Vq9bZ8enebknqNz7FcLt905VE7j5m+lG76FVC+4a8QACa8JjvO10Yh/vgvFTACUSs7twBDfU29HJ8rkkTWGeelWKbj92wJqK8pIzalrtYqgFu+SAVUMCyz1jEN9DmAZI4Yra+vT7lrpqDi5VuxAXXBE5yyR5hk0C6RD4tYSE4j27ZLbPqNFGWOEW0gksrMCcJ2SsghxzcnpwaSriHW0KXTImg56bkKVpvjB4AN8gHSiaM+FX6Hhoe82Rq9JEAPhhEx0WFh8mfSZEbR8yA8eZt/hGObm0ffiEIMxJiPhEOXNWkuV06k/iXc4gJXKclAguljYYzbDcLIP4XN2cOe0GfgTjZmG7OdeiwWbQPJyCeEX7crt2swrn8gbPKC7vEE/0lhbUv1rRHh9Z4wl9eaJi5SgNalmk7Ly8vfcwSYnp4eTtes987Pz3/LZlIsFs+H6IsOtmCTqXA83VbKkEvKb/l8/vDIyMg19lT3VgQwpLej/v7+y7lc7sDS0tLv9Z6gJzYdIQY/E343aIijxF19aGjoqogJjc3Z2dkrw8PDdzCsUChcRJ0teHJy8qJ1j0ccSqsYeEY42L0+ZMdQo9KmYTqNicHgrK6j3DK6VrZ8YHJYyW11vXRxPO0NVo4r0Y5IYwx3smITExPfiWFnxdU/ADgwMPBTWowGTGp+LcyLIvkvmPgqCXwGpLnScf3m1NTU5dHR0Z+DJ5J8yApymSSDB1NXV9e+1dXVB+Pj4xc40CZ9AHwwnEvFsEui/3C/UPAkdZvW7J3kbW5xrt2NLc8O7LJocSTarQOCa5S2OWRyJDNkr6AtOyaN3TaUE81j4cavARjkMxA5RB9XXnPtRfCGCHfCLYbpXGkGqg4locCWCLeV1GU8Z74nEbf8FiqyGIUaGBsogryw/sS0V+qciGCI5A+vC/NXxnNhssW26RWox5lfKOG+fgAAAABJRU5ErkJggg==" />\n\t\t\t</div>'},scalableHTML:function(t){var n=t.level_duration||0,e=new Date((new Date).getTime()+60*n*60*1e3);this.endTime=e,this.preSum=t.currency,this.recentSum=t.level_currency,this.dialog.innerHTML='<div class="'+p("scalable-coupon-new")+' e-active-openBuyerApp" buyer-coupon-code='+t.buyer_coupon_code+' buyer-coupon-type="scalable" perf-ignore>\n\t\t\t\t<div class="'+p("currency-num")+'"><span>'+t.currency+'</span></div>\n\t\t\t\t<div class="'+p("level-currency-num")+'"><span>至少翻到'+t.level_currency+'元</span></div>\n\t\t\t\t<img class="'+p("scalable-coupon-head")+'" src="'+this.headImage+'" />\n\t\t\t</div>'},showQrcodeDialog:function(){var e=this;e.jsonp("//thor.weidian.com/udccore/udc.user.getWdkfFollowById/1.0",function(t){if(t&&t.status&&0===t.status.code)if(!t.result&&/MicroMessenger/i.test(navigator.userAgent)){var n="v-components/cpn-coupon-dialog@qrcode";e.getCookie(n)||(e.setCookie(n,1,864e5),e.renderQrcode())}else e.closeDialogHook()})},getWeixinHeadImage:function(){var n=this;n.getCookie("uid")?n.jsonp("//thor.weidian.com/udccore/udc.user.getUserInfoById/1.0",function(t){t&&t.status&&0===t.status.code&&t.result?t.result.wechat?n.headImage=t.result.wechat.logo:t.result.basic?n.headImage=t.result.basic.headImage:n.headImage="https://si.geilicdn.com/img-7ef900000169c3aa57430a217252_240_240.jpg":n.headImage="https://si.geilicdn.com/img-7ef900000169c3aa57430a217252_240_240.jpg"}):n.headImage="https://si.geilicdn.com/img-7ef900000169c3aa57430a217252_240_240.jpg"},renderQrcode:function(){var n=this,t=document.createElement("div");switch(n.source){case"iweidian":var e="关注微店客服号，了解最新优惠活动";break;case"paySuccess":e="关注微店客服号，实时了解物流信息";break;default:e="关注微店客服号，了解本店上新优惠"}t.className=p("coupon-qrcode-guide-wrap"),t.innerHTML='<div class="'+p("coupon-qrcode-guide-content")+'" perf-ignore>\n\t\t\t\t<div class="'+p("coupon-qrcode-guide-dialog")+'">\n\t\t\t\t\t<div class="'+p("coupon-qrcode-title")+'">'+e+'</div>\n\t\t\t\t\t<img data-spider-action-name="qrcode-touch-'+n.source+'" data-spider-action-args="'+n.source+'" src="'+n.qrcodeImg(n.source)+'">\n\t\t\t\t\t<div class="'+p("qrcode-coupon-close")+'"></div>\n\t\t\t\t\t<div class="'+p("qrcode-coupon-line")+'"></div>\n\t\t\t\t</div>\n\t\t\t</div>',document.body.appendChild(t),n.spiderTrackImpression("qrcode-touch-impression",{msg:n.source});var o=document.querySelector("."+p("coupon-qrcode-guide-content")),i=document.querySelector("."+p("qrcode-coupon-close"));o&&o.addEventListener("click",function(t){t.target.className&&t.target.className==p("coupon-qrcode-guide-content")&&(n.remove(document.querySelector("."+p("coupon-qrcode-guide-wrap"))),n.closeDialogHook())}),i&&i.addEventListener("click",function(t){n.remove(document.querySelector("."+p("coupon-qrcode-guide-wrap"))),n.closeDialogHook()})},qrcodeImg:function(t){var n;switch(t){case"shopDetail":n="https://si.geilicdn.com/img-31a50000016772b987830a028841_504_300.jpg";break;case"itemDetail":n="https://si.geilicdn.com/img-33490000016772b9a2bb0a02853e_504_300.jpg";break;case"iweidian":n="https://si.geilicdn.com/img-33920000016772b9a2530a028841_504_300.jpg";break;case"paySuccess":n="https://si.geilicdn.com/img-339c0000016772b9a2bc0a028841_504_300.jpg";break;case"diary":n="https://si.geilicdn.com/img-3f260000016773e469d60a028841_504_300.jpg";break;default:n="https://si.geilicdn.com/img-31a50000016772b987830a028841_504_300.jpg"}return n},getDataRenderJson:function(t,n,e){return!!(t in n&&n[t].dataList&&n[t].dataList.length&&n[t].dataList[0].renderDataJson)&&(1==n[t].dataList.length&&1==e?n[t].dataList[0].renderDataJson:n[t].dataList.map(function(t){return{type:t.renderTitle,value:t.renderDataJson}}))},fetchCouponSwitch:function(c){var a=this;if("tlive"===this.getUrlQuery("wfr"))return s("腾讯直播，暂停红包投放"),void c(!1);y.query({exhibitCode:"h5_fetch_coupon_switch",spaceCodeList:["wx_fetch_coupon_switch_space"]},function(t){var n=y.customFormat("wx_fetch_coupon_switch_space",t)||{};s("获取到全局开关设置",n);var e=a.page.toLowerCase(),o=d(),i=!1!==n[e+"_"+o];s("当前环境及开关",e+"_"+o,i),c(i)})},getPutInStatus:function(p,t){var m=this,g="666d8af358054c258260b990b36cbf8a",v="05b9b13998b44cebaab530cc1fc7cf31",n=function(t){var n=m.getDataRenderJson(v,t);n instanceof Array&&n.forEach(function(t){"shop"==t.type?m.key2JsonShop=t.value:"item"==t.type&&(m.key2JsonItem=t.value)});var e=m.getDataRenderJson("bfa82961357942219c91b8d2653facdc",t,1),o=m.getDataRenderJson("5bb35c4ae7c34fd5a6b0f0b5b068e41e",t,1);if(g in t&&t[g].renderTitle&&(m.qrcodeStatus=t[g].renderTitle),e){var i=e.grayVersion,c=e.couponActivityType,a=e.oneCouponBgUrl,s=e.blockPadding,r=e.notesColorNumber,u=e.otherColorNumber,d=e.closeBtnRight,l=e.closeBtnTop;m.grayVersion=i,m.couponActivityType=c,m.oneCouponBgUrl=a,m.blockPadding=s,m.notesColorNumber=r,m.otherColorNumber=u,m.closeBtnRight=d||42,m.closeBtnTop=l||-86}o&&(m.scalableCouponConfig=o),p()};m.exhibitResult&&t?n(m.exhibitResult):t?m.jsonp("//thor.weidian.com/poseidon/exhibit.spaceJson/1.0?param="+encodeURIComponent(JSON.stringify({exhibitCode:"coupon_qrcode"})),function(t){t&&t.status&&0==t.status.code&&t.result&&n(t.result.data)}):m.jsonp("//thor.weidian.com/poseidon/exhibit.spaceJson/1.0?param="+encodeURIComponent(JSON.stringify({exhibitCode:"coupon_qrcode",spaceCodeList:[v]})),function(t){t&&t.status&&0==t.status.code&&t.result&&n(t.result.data)})},floatHTML:function(){var t=this,n=t.key2JsonItem&&t.key2JsonItem.right_corner_img,e=void 0;return e=t.isLogin()?"https://si.geilicdn.com/img-6149000001697157fc450a20b7b9-unadjust_159_134.png":n||"https://si.geilicdn.com/img-6149000001697157fc450a20b7b9-unadjust_159_134.png",t.isScalable?'<span class="'+q["coupon-float-content"]+' cash-coupon-over-flow">\n\t\t\t\t\t<img src="'+e+'" />\n\t\t\t\t\t<span class="'+q["cash-coupon-btn-tip"]+' cash-coupon-btn-scalable">\n\t\t\t\t\t\t<span class="'+q["cash-coupon-btn-text"]+'">翻倍红包</span>\n\t\t\t\t\t<span class="cash-coupon-btn-time-tip e-active-count-down">'+t.floatTextRender()+"</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>":t.isLogin()?'<span class="'+q["coupon-float-content"]+' cash-coupon-over-flow">\n\t\t\t\t\t<img src="'+e+'" />\n\t\t\t\t\t<span class="'+q["cash-coupon-btn-tip"]+'">\n\t\t\t\t\t\t<span class="'+q["cash-coupon-btn-text"]+'">去用红包</span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>':'<img class="'+q["no-login-item-right"]+'" src="'+e+'" />'},showFloatContent:function(){var t=this,n=t.floatContainer&&document.querySelector(t.floatContainer);n&&(n.innerHTML=t.floatHTML(),t.isScalable&&this.timeInterval(t.endTime,1e3),t.floatRenderHook(),n.addEventListener("click",function(){t.floatClickHook()}))},scrollBottomBanner:function(n){var e=this;window.addEventListener("scroll",function t(){e.scrollBottomBannerRender(n),window.removeEventListener("scroll",t,!1)},!1)},scrollBottomBannerRender:function(t){var n=this,e=document.createElement("div");e.className=p("shop-download-bubble-content"),e.innerHTML=n.shopDownloadBannerTpl(t),document.body.appendChild(e),n.spiderTrackImpression("shop_banner_frompocket"),document.querySelector("."+p("shop-download-bubble-inner")).addEventListener("click",function(t){n.couponExhibition="shop_banner_frompocket",n.useBtnListener(t)}),setTimeout(function(){e.style.display="none"},5e3)},couponTypeCondition:function(t){var n=!t.is_scalable&&"withdraw"==t.type,e=t.is_scalable,o=!t.is_scalable&&"withdraw"!==t.type,i=void 0,c=void 0,a=void 0,s=void 0,r=void 0,u=void 0;return u=n?(i="withdraw",a="https://si.geilicdn.com/img-6d5e0000016b26dd1fc90a217216-unadjust_244_72.png",c="https://si.geilicdn.com/img-2e1a0000016b2764dcfe0a217216-unadjust_1052_240.png",s="",r=t.currency,""):(r=e?(i="scalable",a="https://si.geilicdn.com/img-11dd0000016a0b67e3cd0a217205-unadjust_232_36.png",c="https://si.geilicdn.com/img-4c130000016b2764dd060a21924a-unadjust_1052_240.png",s=t.currency,t.level_currency):(a="https://si.geilicdn.com/img-74000000016a0b67e3ca0a21924a-unadjust_160_36.png",c="https://si.geilicdn.com/img-3dd20000016b2764dd030a219248-unadjust_1052_240.png",s=i=""),t.buyer_coupon_code),{isWithDraw:n,isScalable:e,isNormal:o,buyerCouponType:i,cornerImg:a,suspendBg:c,buyerCouponCode:u,couponPreSum:s,couponRecSum:r}},shopDownloadBannerTpl:function(t){var n=this.couponTypeCondition(t),e=n.isWithDraw,o=n.isScalable,i=n.isNormal,c=n.buyerCouponType,a=n.suspendBg,s=n.buyerCouponCode,r=n.couponPreSum,u=n.couponRecSum,d=this.styleArrayToString({backgroundImage:"url("+a+")"},[],["backgroundImage"]);return'\n\t\t\t\t<div class="'+p("shop-download-bubble-inner")+'"\n\t\t\t\t\tbuyer-coupon-code="'+s+'"\n\t\t\t\t\tbuyer-coupon-type="'+c+'"\n\t\t\t\t\tcoupon-presum="'+r+'"\n\t\t\t\t\tcoupon-recsum="'+u+'"\n\t\t\t\t\tstyle="'+d+'"\n\t\t\t\t\tperf-ignore\n\t\t\t\t>\n\t\t\t\t\t<div class="'+p("bubble-amount-content")+'">\n\t\t\t\t\t'+(1==t.type?'<div class="'+p("bubble-amount-random")+'">\n\t\t\t\t\t\t\t<div class="'+p("bubble-amount-random-symbol")+'">\n\t\t\t\t\t\t\t\t<span>￥</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="'+p("bubble-amount-random-value")+'">\n\t\t\t\t\t\t\t\t<span>'+t.min_amount+'~</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+p("bubble-amount-random")+'">\n\t\t\t\t\t\t\t<div class="'+p("bubble-amount-random-value")+'">\n\t\t\t\t\t\t\t\t<span>'+t.max_amount+"</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>":'<div class="'+p("bubble-amount-symbol")+'"><span>￥</span></div>\n\t\t\t\t\t\t<div class="'+p("bubble-amount-value")+'"><span>'+t.currency+"</span></div>")+'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p(e?"bubble-remind-text-withdraw":"coupon-item-hide")+'"><span>可提现</span></div>\n\t\t\t\t\t<div class="'+p("bubble-remind-text")+" "+(i?"":p("coupon-item-hide"))+'">\n\t\t\t\t\t'+(1==t.type?'<span class="'+p("bubble-condition-text")+'">下单随机立减</span>':"")+"\n\t\t\t\t\t\t<span>"+t.remind_text+'</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("bubble-remind-text")+" "+(o?"":p("coupon-item-hide"))+'">\n\t\t\t\t\t\t<span>最少翻倍到¥'+t.level_currency+'</span>\n\t\t\t\t\t\t<span class="'+p("bubble-time-text")+'">'+t.level_duration+"前可翻倍</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"},showMineCoupon:function(t){var n=this,e=t.resultArr.map(function(t){return n.showMineCouponItem(t)}).join("");this.dialog.innerHTML='\n\t\t\t\t<div class="'+p("mine-coupon-list-content")+" "+p("mine-coupon-item-"+t.resultArr.length)+'" perf-ignore>\n\t\t\t\t\t'+e+'\n\t\t\t\t\t<div class="e-active-newuser-coupon-close '+p("mine-coupon-list-close")+'"></div>\t\t\t\t</div>'},showMineCouponItem:function(t){var n=this.couponTypeCondition(t),e=n.isWithDraw,o=n.isScalable,i=n.isNormal,c=n.buyerCouponType,a=n.cornerImg,s=n.buyerCouponCode,r=n.couponPreSum,u=n.couponRecSum;return'\n\t\t\t<div\n\t\t\t\tclass="'+p("mine-coupon-element")+' e-active-minecoupon"\n\t\t\t\tcoupon-presum="'+r+'"\n\t\t\t\tcoupon-recsum="'+u+'"\n\t\t\t\tbuyer-coupon-code="'+s+'"\n\t\t\t\tbuyer-coupon-type="'+c+'"\n\t\t\t\tperf-ignore\n\t\t\t>\n\t\t\t\t<img class="'+p("mine-coupon-element-corner")+" "+(e?"":p("coupon-item-hide"))+'" src="'+a+'" />\n\t\t\t\t<img class="'+p("mine-coupon-element-corner")+" "+(i?"":p("coupon-item-hide"))+'" src="'+a+'" />\n\t\t\t\t<img class="'+p("mine-coupon-element-corner")+" "+(o?"":p("coupon-item-hide"))+'" src="'+a+'" />\n\t\t\t\t'+(1==t.type?'<div class="'+p("list-amount-random")+'">\n\t\t\t\t\t\t<div class="'+p("list-amount-random-symbol")+'">\n\t\t\t\t\t\t\t<span>￥</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+p("list-amount-random-value")+'">\n\t\t\t\t\t\t\t<span>'+t.min_amount+'~</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="'+p("list-amount-random")+" "+p("list-amount-random-max")+'">\n\t\t\t\t\t\t<div class="'+p("list-amount-random-symbol")+'">\n\t\t\t\t\t\t\t<span>￥</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="'+p("list-amount-random-value")+'">\n\t\t\t\t\t\t\t<span>'+t.max_amount+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>":'<div class="'+p("list-amount-symbol")+'"><span>￥</span></div>\n\t\t\t\t\t<div class="'+p("list-amount-value")+'"><span>'+t.currency+"</span></div>")+'\n\t\t\t\t<img class="'+p("list-dotted-line")+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAA7CAYAAAC+ATB/AAAAAXNSR0IArs4c6QAAADhJREFUKBVjPCGkwsfy4zf3Hw7Wr0wgxg+Gf4wgmgkkwsHA9B9EM5ABGEeNRg210QBBDQ+GgQ8QAJOzkJplLlULAAAAAElFTkSuQmCC" />\n\t\t\t\t<div class="'+p("list-remind-text")+" "+(o?p("coupon-item-hide"):"")+'"><span>'+t.remind_text+'</span></div>\n\t\t\t\t<div class="'+p("list-remind-text")+" "+p("list-remind-text-scalable")+" "+(o?"":p("coupon-item-hide"))+'">\n\t\t\t\t\t<span>最少翻倍到¥'+t.level_currency+'</span>\n\t\t\t\t\t<span class="'+p("list-time-text")+'">'+t.level_duration+'前可翻倍</span>\n\t\t\t\t</div>\n\t\t\t\t<div class="'+p("list-use-btn")+" "+(e?"":p("coupon-item-hide"))+'"><span>去App提现</span></div>\n\t\t\t\t<div class="'+p("list-use-btn")+" "+(i?"":p("coupon-item-hide"))+'"><span>去App使用</span></div>\n\t\t\t\t<div class="'+p("list-use-btn")+" "+(o?"":p("coupon-item-hide"))+'"><span>去App翻倍</span></div>\n\t\t\t</div>\n\t\t\t'},toggleToolbarContent:function(){var t=this;if(t.suspendImg){var n=document.querySelector(t.suspendImg);if(n){var e=void 0;if(t.isLogin())e="https://si.geilicdn.com/img-35590000016b26d80d3c0a21924a-unadjust_192_144.png";else e=t.key2JsonShop&&t.key2JsonShop.right_corner_img||"https://si.geilicdn.com/img-35590000016b26d80d3c0a21924a-unadjust_192_144.png";if(t.spiderTrackImpression("suspendImg"),n.src=e,n.setAttribute("coupon-guide",1),t.isLogin())n.addEventListener("click",t.suspendImgEvent.bind(this));else{var o=t.key2JsonShop.jump_link;n.addEventListener("click",function(){t.toolbarItemClickHook(o)})}}}},suspendImgEvent:function(){var n=this;n.spiderTrackAction("suspendImg"),n.mineCouponRequest(function(t){n.isScalable=t[0].is_scalable,n.panel.className=p("coupon-component-wrap"),n.reuse=!0,1==t.length?(n.spiderTrackImpression("single_coupon_frompocket"),n.couponExhibition="single_coupon_frompocket","withdraw"==t[0].type?n.showCouponDialog({value:t[0].currency,mode:"again"}):n.showCouponDialog({resultArr:t,is_multi_coupon:!1,slogon:t[0].slogon})):(n.spiderTrackImpression("multi_coupon_frompocket"),n.couponExhibition="multi_coupon_frompocket",n.showCouponDialog({resultArr:t,isMineCoupon:!0}))})},closeElListener:function(t){var n=this,e=document.getElementById("common-coupon-component-wrap"),o=document.querySelector("."+p("e-active-openBuyerApp"))||document.querySelector("."+p("mine-coupon-list-content"))||document.querySelector(".e-active-coupon-animation");if(t&&t.stopPropagation(),clearInterval(n.intervalId),"equity"==n.couponType)return n.remove(e),void n.closeDialogHook();if(n.floatContainer){try{o.classList.add(p("zoomOutDown"),p("animated")),e.classList.add(p("wrapOutOpacity"),p("animated"))}catch(t){}setTimeout(function(){window.lib.AutoToolbar?(window.blockAutoToolbar=!1,new window.lib.AutoToolbar({page:"itemDetail"})):n.showFloatContent(),n.remove(e)},1e3)}else if(n.suspendImg){try{o.classList.add(p("zoomOutDown"),p("animated")),e.classList.add(p("wrapOutOpacity"),p("animated"))}catch(t){}setTimeout(function(){n.remove(e),n.mineCouponStatus||n.toggleToolbarContent()},1e3)}else n.remove(e);n.spiderTrackAction("coupon_close",{msg:n.isMulti?"多张":n.isScalable?"翻倍":"new"==n.grayVersion?"单张新版":"单张"}),n.qrcodeStatus&&"goodsRecommend"!=n.source&&!n.reuse?n.showQrcodeDialog():n.closeDialogHook()},fetchBtnElListener:function(){this.fetchCouponAction("center-show")},failConfirmBtnListener:function(){this.remove(document.getElementById("common-coupon-component-wrap")),this.closeDialogHook()},useBtnListener:function(t){for(var n=this,e=t.target;!e.hasAttribute("buyer-coupon-code")&&!e.isEqualNode(t.currentTarget);)e=e.parentNode;var o=e.getAttribute("buyer-coupon-code"),i=e.getAttribute("buyer-coupon-type"),c=e.getAttribute("coupon-presum"),a=e.getAttribute("coupon-recsum");if(c&&(n.preSum=c),a&&(n.recentSum=a),"withdraw"==i)n.buyerDownloadAppHook("",JSON.stringify({type:2,price:100*n.recentSum}),n.couponExhibition);else if("scalable"==i)n.buyerDownloadAppHook(o,JSON.stringify({headImage:n.headImage,preSum:n.preSum,recentSum:n.recentSum,code:o,type:1}),n.couponExhibition);else if("equity"==i){var s=n.equityInfoInApp,r=s.renderType,u=s.rightsType;n.spiderTrackAction("_download",{renderType:r,rightsType:u},"equity"),n.buyerDownloadAppHook("",JSON.stringify(n.equityInfoInApp),n.couponExhibition)}else if("nologin"==i){if(n.spiderTrackAction("nologin-dialog",{msg:n.nologinCenterImg}),"shopDetail"==n.source){var d=n.key2JsonShop.jump_link;n.toolbarItemClickHook(d)}else if("itemDetail"==n.source){var l=n.key2JsonItem.jump_link;n.floatClickHook(l)}}else n.buyerDownloadAppHook(o,"",n.couponExhibition);n.reuse||n.spiderTrackAction("newuser_coupon_jumpBuyer",{msg:n.isMulti?"多张":n.isScalable?"翻倍":"new"==n.grayVersion?"单张新版":"单张"})},bindEvent:function(){for(var n=this,e=this,t=document.querySelector("."+p("e-active-openBuyerApp")),o=document.querySelectorAll("."+p("e-active-minecoupon")),i=document.querySelector("."+p("e-active-fetchcoupon")),c=document.querySelector("."+p("coupon-fail-confirm-btn")),a=document.querySelectorAll(".e-active-newuser-coupon-close"),s=0;s<a.length;s++){a[s].addEventListener("click",e.closeElListener.bind(this))}i&&i.addEventListener("click",e.fetchBtnElListener.bind(this)),c&&c.addEventListener("click",e.failConfirmBtnListener.bind(this)),t&&t.addEventListener("click",e.useBtnListener.bind(this)),o&&o.length&&o.forEach(function(t){t.addEventListener("click",e.useBtnListener.bind(n))}),"weixin"===d()&&"itemDetail"===e.page&&setTimeout(function(){a[0].click()},2e3)},jsonp:function(t,n,e){var o="jsonp_"+Date.now()+"_"+Math.random().toString().substr(2),i="callback",c=document.createElement("script");c.src=-1===t.indexOf("?")?t+"?"+i+"="+o+"&wfr_public="+JSON.stringify({referService:"h5-shop"}):t+"&"+i+"="+o+"&wfr_public="+JSON.stringify({referService:"h5-shop"}),window[o]=function(t){try{void 0!==n&&n(t)}finally{delete window[o],c&&c.parentNode&&c.parentNode.removeChild(c)}},document.body.appendChild(c)},remove:function(t){try{if(t.removeNode=[],null!=t.length){for(var n=t.length,e=0;e<n;e++)t.removeNode.push({parent:t[e].parentNode,inner:t[e].outerHTML,next:t[e].nextSibling});for(e=0;e<n;e++)t[0].parentNode.removeChild(t[0])}else t.removeNode.push({parent:t.parentNode,inner:t.outerHTML,next:t.nextSibling}),t.parentNode.removeChild(t)}catch(t){}},spiderTrackImpression:function(t,n,e){n=n||{};var o=window.spider;o&&o.trackImpression({actionName:t,actionArgs:n,spmc:e})},spiderTrackAction:function(t,n,e){n=n||{};var o=window.spider;o&&o.trackAction({actionName:t,actionArgs:n,spmc:e})},pxToRem:function(t){return(t/30).toFixed(3)+"em"},timeInterval:function(t,n){t&&"string"==typeof t&&(t=t.replace(/-/g,"/"));var e=new Date(t)-new Date;return 0<e&&e<864e5+1&&(this.timer(e,n),!0)},timer:function(t,n){var c,a,s,r,u=t/(n||100),d=this,l=n?1e3/n:10,e=function(){var t=0,n=0,e=0,o=0,i=0;0<--u&&(t=Math.floor(u/(86400*l)),n=Math.floor(u/(3600*l))-24*t,e=Math.floor(u/(60*l))-24*t*60-60*n,o=Math.floor(u/l)-24*t*60*60-60*n*60-60*e,i=Math.floor(u)-24*t*60*60*l-60*n*60*l-60*e*l-o*l),n<=9&&(n="0"+n),e<=9&&(e="0"+e),o<=9&&(o="0"+o),c&&a&&s?(c.innerHTML=n,a.innerHTML=e,s.innerHTML=o):(c=document.querySelector("."+q["e-active-count-down"]+" ."+q["count-down-hour"]+" span"),a=document.querySelector("."+p("e-active-count-down")+" ."+p("count-down-min")+" span"),s=document.querySelector("."+p("e-active-count-down")+" ."+p("count-down-second")+" span"),r=document.querySelector("."+p("e-active-count-down")+" ."+p("count-down-micsecond")+" span"),c&&(c.innerHTML=n),a&&(a.innerHTML=e),s&&(s.innerHTML=o)),r&&(r.innerHTML=i),0==u&&clearInterval(d.intervalId)};e(),d.intervalId=setInterval(e,n||100)},styleArrayToString:function(n,t,e){return e=e||[],t=t||[],Object.keys(n).map(function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+": "+n[t]}).filter(function(t){return t}).join(";")},setCookie:function(t,n,e){var o=""==(n=n||"")?new Date(0).toGMTString():new Date((new Date).getTime()+e).toGMTString(),i="; path=/"+(-1!=document.domain.indexOf("vdian.com")?"; domain=vdian.com":-1!=document.domain.indexOf("koudai.com")?"; domain=koudai.com":-1!=document.domain.indexOf("weidian.com")?"; domain=weidian.com":""),c=escape(t)+"="+escape(n);document.cookie=c+"; expires="+o+i},getCookie:function(t){var n,e=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(n=document.cookie.match(e))?unescape(n[2]):""},getUrlQuery:function(t){for(var n=location.search.substr(1).split("&"),e=0;e<n.length;e++){var o=n[e].split("=");if(o[0]===t)return decodeURIComponent(o[1])}return null},isLogin:function(){return this.getCookie("is_login")}},"function"==typeof define&&define.cmd&&define(function(t,n,e){return f}),"object"===("undefined"==typeof window?"undefined":m(window))&&(window.CouponDialog=window.CouponDialog||f,window.CouponDialog.version="1.4.17"),f});
