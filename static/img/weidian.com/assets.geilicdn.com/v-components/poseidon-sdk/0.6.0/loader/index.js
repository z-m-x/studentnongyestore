!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="//assets.geilicdn.com/v-components/poseidon-sdk/0.6.0/",t(t.s=98)}({100:function(e,t,n){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.defaultCacheExpires;e=o(e);try{var n=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):null;return!!n&&(!(n.timestamp+t<(new Date).getTime())&&n.value)}catch(e){return!1}}function r(e,t){e=o(e);try{return localStorage.setItem(e,JSON.stringify({timestamp:(new Date).getTime(),value:t}))}catch(e){return!1}}function o(e){return e+"@"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.defaultCacheNamespace)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(14),c=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={getCache:i,setCache:r},e.exports=t.default},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={env:"production",thor:"//thor.weidian.com",cdnUrl:"//assets.geilicdn.com/v-components/poseidon-sdk/0.6.0",defaultCacheNamespace:"poseidonSDK",defaultCacheExpires:6e4,VUE_PATH:"https://assets.geilicdn.com/v-components/cdn/vue/2.6.10/index.js"},e.exports=t.default},39:function(e,t,n){"use strict";function i(){if(-1!==location.href.search("poseidon-debug"))try{var e;(e=console).log.apply(e,["%c[poseidon debug]","padding: 6px 12px; color:#ffffff; background: #c81925;"].concat(Array.prototype.slice.call(arguments)))}catch(e){}}function r(e,t){var n=this,i=document.createElement("script");i.src=e,i.onload=function(){t.call(n)},i.setAttribute("crossorigin","anonymous"),document.body.appendChild(i)}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(n){var i=document.createElement("script");i.onload=function(){n()},t&&i.setAttribute("crossorigin","anonymous"),i.src=e,document.querySelector("body").appendChild(i)})}function a(e,t){var n=this,i="jsonp_"+Math.random().toString().substr(2),r=document.createElement("script");r.src=-1===e.indexOf("?")?e+"?callback="+i:e+"&callback="+i,window[i]=function(e){try{"function"==typeof t&&t.call(n,e)}finally{delete window[i],r.remove()}},document.body.appendChild(r)}function c(){function e(){var t=(new Date).getTime(),c=t-a>n;if(r())o();else{if(c)return;setTimeout(function(){e()},i)}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timeout,i=t.step,r=t.condition,o=t.handler,a=(new Date).getTime();e()}function u(){return Math.random().toString(36).substring(7)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:25,t=document.querySelector('meta[name="viewport"]').getAttribute("content").match(/initial\-scale=([\d\.]+)/),n=parseFloat(t[1]),i=parseInt(1/n),r=document.documentElement.getBoundingClientRect().width;return r/i>640&&(r=640*i),r/e+"px"}function s(){return new Promise(function(e){"function"==typeof window.Vue?e():o(f.default.VUE_PATH,!1).then(function(){e()})})}Object.defineProperty(t,"__esModule",{value:!0});var d=n(14),f=function(e){return e&&e.__esModule?e:{default:e}}(d);t.default={debug:i,loadScript:r,pLoadScript:o,jsonp:a,waitUntil:c,uuid:u,initFontSize:l,injectVue:s},e.exports=t.default},98:function(e,t,n){e.exports=n(99)},99:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(14),c=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(39),l=n(100),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);try{(0,u.debug)("loader 入参",n),this.app=null,this.listener=[],this.fetchLatestAppPath(function(e){(0,u.debug)("app资源路径",e),(0,u.loadScript)(e,function(){t.app=new window.PoseidonApp(r({},n)),t.once("ready",function(){t.trackPageView()}),t.app.loadPlugings(n.plugins||[],function(){t.emit("ready")})})})}catch(e){(0,u.debug)("loader error",e)}}return o(e,[{key:"fetchLatestAppPath",value:function(e){var t=this;if("development"===c.default.env)return void e.call(this,c.default.cdnUrl+"/app/index.js");var n=(0,l.getCache)("app");if(n)return void e.call(this,n);var i=c.default.thor+'/appconf/getAppConfig/1.0?context={"appid":"evoke.h5","platform":"h5"}&param=[{"t":"0","v":"0"}]';(0,u.jsonp)(i,function(n){try{var i=n.result.app;(0,l.setCache)("app",i),e.call(t,i)}catch(e){(0,u.debug)("获取poseidon-sdk版本信息失败",e)}})}},{key:"plugin",value:function(e,t){function n(e){var t=this;return new Promise(function(n){if(t.app){var i=t.app.plugin(e);n(i)}else t.once("ready",function(){var i=t.app.plugin(e);n(i)})})}var i=this;return new Promise(function(r,o){n.call(i,e).then(function(e){try{e.call(i,t).then(function(e){r(e)})}catch(e){o(e)}})})}},{key:"trackPageView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.app?((0,u.debug)("触发事件 trackPageView，立即执行",t),this.app.trackPageView(t,function(t,n){e.emit("pageview",{req:t,res:n})})):((0,u.debug)("触发事件 trackPageView，进入队列",t),this.queue.push({type:"pageview",extend:t}))}},{key:"trackClick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.app?((0,u.debug)("触发事件 trackClick，立即执行",t),this.app.trackClick(t,function(t,n){e.emit("click",{req:t,res:n})})):((0,u.debug)("触发事件 trackClick，进入队列",t),this.queue.push({type:"click",extend:t}))}},{key:"trackBuyer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.app?((0,u.debug)("触发事件 trackBuyer，立即执行",t),this.app.trackBuyer(t,function(t,n){e.emit("buyer",{req:t,res:n})})):((0,u.debug)("触发事件 trackBuyer，进入队列",t),this.queue.push({type:"buyer",extend:t}))}},{key:"consumerQueue",value:function(){for(;;){var e=this.queue.shift();if(!e){(0,u.debug)("无滞留任务队列");break}switch((0,u.debug)("开始消费滞留任务",e),e.type){case"pageview":this.trackPageView(e.extend);break;case"click":this.trackClick(e.extend);break;case"buyer":this.trackBuyer(e.extend)}}}},{key:"on",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.listener.push({event:e,handler:t,once:n})}},{key:"off",value:function(e,t){var n=this.listener.filter(function(n){return!(n.event===e&&n.handler===t)});this.listener=n}},{key:"emit",value:function(e,t){var n=this;this.listener.forEach(function(i){i.event===e&&(i.handler.call(n,t),i.once&&n.off(i.event,i.handler))})}},{key:"once",value:function(e,t){this.on(e,t,!0)}},{key:"ready",value:function(e){this.once("ready",e)}}]),e}();window.Poseidon=window.Poseidon||s}});